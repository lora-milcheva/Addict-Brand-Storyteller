(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(39)},27:function(e,t,a){},32:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),s=a(43);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(2),l=a(3),m=a(5),u=a(4),d=a(6),g=(a(27),a(32),a(41)),h=a(38),p=a(42),f=a(13),b=a.n(f),v="https://baas.kinvey.com",j="kid_HJ46HdBCm",E=function(e,t,a,n){var r=void 0!==n?v+"/"+t+"/"+j+"/"+a+n:v+"/"+t+"/"+j+"/"+a;return b.a.ajax({url:r,type:"GET",headers:O(e)})},y=function(e,t,a,n){var r=v+"/"+t+"/"+j+"/"+a;return b.a.ajax({url:r,type:"POST",headers:O(e),data:JSON.stringify(n)})},C=function(e,t,a,n){var r=v+"/"+t+"/"+j+"/"+a;return b.a.ajax({url:r,type:"PUT",headers:O(e),data:JSON.stringify(n)})},N=function(e,t,a){var n=v+"/"+t+"/"+j+"/"+a;return b.a.ajax({url:n,type:"DELETE",headers:O(e)})},O=function(e){return"basicAuth"===e?{Authorization:"Basic "+btoa(j+":0d8a90c423d84f79aa9d89c75a1ebdb1"),"Content-type":"application/json"}:{Authorization:"Kinvey "+sessionStorage.getItem("authtoken"),"Content-type":"application/json"}},S={register:function(e){return E("basicAuth","user",null,e)},login:function(e){return y("basicAuth","user","login",e)},loginAnonymousUser:function(){return y("basicAuth","user","login",{username:"anonymous",password:"123456"})},saveSession:function(e){sessionStorage.setItem("authtoken",e._kmd.authtoken),sessionStorage.setItem("username",e.username),e._kmd.roles.length>0&&sessionStorage.setItem("role",e._kmd.roles[0].roleId)},logout:function(){return y("sessionAuth","user","_logout")},clearSession:function(){sessionStorage.clear()},checkUser:function(){return sessionStorage.getItem("role")}},w={createCategory:function(e){var t=I(e);return y("adminAuth","appdata","categories",t)},loadAllCategories:function(){return E("adminAuth","appdata","categories")},loadCategoryData:function(e){return E("adminAuth","appdata","categories/"+e)},editCategory:function(e,t){var a="categories/"+e,n=I(t);return C("adminAuth","appdata",a,n)}};function I(e){return{name:e.name}}var P={bg:"bg",en:"en"},k={bg:{projects:"\u041f\u0440\u043e\u0435\u043a\u0442\u0438",contact:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",clients:"\u041a\u043b\u0438\u0435\u043d\u0442\u0438",categories:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",logout:"\u0418\u0437\u0445\u043e\u0434"},en:{projects:"Projects",contact:"Contacts",clients:"Clients",categories:"Categories",logout:"Logout"}},D={name:"\u0418\u043c\u0435 \u043d\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",client:"\u041a\u043b\u0438\u0435\u043d\u0442",year:"\u0413\u043e\u0434\u0438\u043d\u0430",webPage:"\u0423\u0435\u0431 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",isStar:"\u0422\u043e\u043f \u043f\u0440\u043e\u0435\u043a\u0442",category:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",thumbnail:"\u0422\u044a\u043c\u0431\u043d\u0435\u0439\u043b",images:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",videos:"\u0412\u0438\u0434\u0435\u0430"},x={name:"Project name",description:"Description",client:"Client",year:"Year",webPage:"Web Page",isStar:"Top Project",category:"Category",thumbnail:"Thumbnail",images:"Images",videos:"Videos"},M={name:"\u0418\u043c\u0435 \u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0442\u0430"},A={name:"Category name"},L={name:"\u0418\u043c\u0435 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},_={name:"Client name"},T={bg:{create:"\u0421\u044a\u0437\u0434\u0430\u0439",edit:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f",delete:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435",cancel:"\u041e\u0442\u043a\u0430\u0437",view:"\u0420\u0430\u0437\u0433\u043b\u0435\u0434\u0430\u0439",confirm:"OK",close:"\u0417\u0430\u0442\u0432\u043e\u0440\u0438",newProject:"\u041d\u043e\u0432 \u043f\u0440\u043e\u0435\u043a\u0442",newClient:"\u041d\u043e\u0432 \u043a\u043b\u0438\u0435\u043d\u0442",newCategory:"\u041d\u043e\u0432\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"},en:{create:"Create",edit:"Edit",delete:"Delete",cancel:"Cancel",view:"View More",confirm:"OK",close:"Close",newProject:"New Project",newClient:"New Client",newCategory:"New Category"}},R={bg:{confirmDeleteProject:"\u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0442\u043e\u0437\u0438 \u043f\u0440\u043e\u0435\u043a\u0442?"},en:{confirmDeleteProject:"Delete this project?"}},J={bg:{projectCreated:"\u041f\u0440\u043e\u0435\u043a\u0442\u044a\u0442 \u0431\u0435\u0448\u0435 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d.",projectDeleted:"\u041f\u0440\u043e\u0435\u043a\u0442\u044a\u0442 \u0431\u0435\u0448\u0435 \u0438\u0437\u0442\u0440\u0438\u0442.",categoryCreated:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0442\u0430 \u0435 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430.",categoryDeleted:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0442\u0430 \u0431\u0435\u0448\u0435 \u0438\u0437\u0442\u0440\u0438\u0442\u0430.",clientCreated:"\u041a\u043b\u0438\u0435\u043d\u0442\u044a\u0442 \u0435 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d.",clientDeleted:"\u041a\u043b\u0438\u0435\u043d\u0442\u044a\u0442 \u0431\u0435\u0448\u0435 \u0438\u0437\u0442\u0440\u0438\u0442.",successEdit:"\u0423\u0441\u043f\u0435\u0448\u043d\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f."},en:{projectCreated:"Project created.",projectDeleted:"Project deleted.",categoryCreated:"Category created.",categoryDeleted:"Category deleted.",clientCreated:"Client created.",clientDeleted:"Client deleted.",successEdit:"Successful edit."}},q={project:{bg:{thumbnail:"\u0422\u044a\u043c\u0431\u043d\u0435\u0439\u043b",images:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",videos:"\u0412\u0438\u0434\u0435\u0430",editProject:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u0440\u043e\u0435\u043a\u0442",createProject:"\u0421\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u0440\u043e\u0435\u043a\u0442",allProjects:"\u0412\u0441\u0438\u0447\u043a\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438"},en:{thumbnail:"Thumbnail",images:"Images",videos:"Videos",editProject:"Edit Project",createProject:"Create New Project",allProjects:"All Projects"}},client:{bg:{editClient:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442",createClient:"\u0421\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442",allClients:"\u0412\u0441\u0438\u0447\u043a\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0438"},en:{editClient:"Edit Client",createClient:"Create New Client",allClients:"All Clients"}},category:{bg:{editCategory:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",createCategory:"\u0421\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",allCategories:"\u0412\u0441\u0438\u0447\u043a\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"},en:{editCategory:"Edit Category",createCategory:"Create New Category",allCategories:"All Categories"}}},F={project:{bg:{otherProjects:"\u0414\u0440\u0443\u0433\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438"},en:{otherProjects:"Other Projects"}}},U={bg:"bg",en:"en"},W=r.a.createContext(U.bg),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadCategories=function(){w.loadAllCategories().then(function(e){a.setState({categories:e})}).catch(function(e){console.log(e)})},a.getLanguage=function(){a.props.location.pathname.split("/").filter(function(e){return""!==e})[0]===U.en?a.context.updateLanguage(U.en):a.context.updateLanguage(U.bg)},a.changeRouteByLanguage=function(e){var t=a.props.location.pathname;if(a.context.language===U.en){var n=t.substring(3);a.context.updateLanguage(U.bg),a.props.history.push(n)}else a.context.updateLanguage(U.en),a.props.history.push("/"+U.en+t)},a.logout=function(){S.logout().then(function(e){S.clearSession(),window.location.reload()}).catch(function(e){return console.log(e)})},a.state={categories:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===sessionStorage.length?S.loginAnonymousUser().then(function(t){S.saveSession(t),e.getLanguage(),e.loadCategories()}).catch(function(e){console.log(e)}):(this.getLanguage(),this.loadCategories())}},{key:"render",value:function(){var e=null!==sessionStorage.getItem("role"),t=this.context.language;if(e)return r.a.createElement("div",{id:"header"},r.a.createElement("nav",{id:"main-nav"},r.a.createElement(g.a,{to:"/admin/projects-list",className:"nav-link",activeClassName:"active"},k[t].projects),r.a.createElement(g.a,{to:"/admin/category-list",className:"nav-link",activeClassName:"active"},k[t].categories),r.a.createElement(g.a,{to:"/admin/clients-list",className:"nav-link",activeClassName:"active"},k[t].clients),r.a.createElement(g.a,{exact:!0,to:"/",className:"nav-link",activeClassName:"active",onClick:this.logout},k[t].logout)));var a=t===U.bg?"/projects/":"/"+t+"/projects/",n=this.state.categories.map(function(e){return r.a.createElement(g.a,{key:e._id,to:a+e.name.en,className:"nav-link",activeClassName:"active"},e.name[t])});return r.a.createElement("div",{id:"header"},r.a.createElement(h.a,{to:"/",id:"brand"}),r.a.createElement("nav",{id:"main-nav"},r.a.createElement(g.a,{to:a,className:"nav-link",activeClassName:"active"},k[t].projects),n,r.a.createElement(g.a,{exact:!0,to:"/",className:"nav-link",activeClassName:"active"},k[t].contact)),r.a.createElement("nav",{id:"second-nav"},r.a.createElement("button",{className:"btn btn-light sm",value:t,onClick:this.changeRouteByLanguage},t===U.bg?U.en:U.bg)))}}]),t}(r.a.Component),B=Object(p.a)(Y);B.WrappedComponent.contextType=W;var K=B,V=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Footer"))}}]),t}(r.a.Component),X=a(45),H=a(36);a(21),a(44);var z=a(10),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showMessage=function(e){document.addEventListener("keypress",a.handleKeyPress),a.setState({visible:!0,message:e})},a.hideMessage=function(){a.setState({visible:!1,message:""})},a.handleKeyPress=function(e){"Enter"===e.key&&(a.hideMessage(),document.removeEventListener("keypress",a.handleKeyPress))},a.state={visible:!1,message:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"render",value:function(){var e=this.state.visible,t=this.props.language;return r.a.createElement("div",{id:"messages",className:e?"visible":"",onClick:this.hideMessage},r.a.createElement("div",{className:"message"},r.a.createElement("p",{className:"message-text"},this.state.message),r.a.createElement("button",{className:"btn btn-primary",onClick:this.hideMessage},T[t].close)))}}]),t}(r.a.Component),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.login=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;""!==n.trim()?""!==r.trim()?sessionStorage.getItem("authtoken")?S.logout().then(function(){S.clearSession(),a.makeLoginRequest()}):a.makeLoginRequest():a.notifications.showMessage("invalid password"):a.notifications.showMessage("invalid username")},a.makeLoginRequest=function(){S.login(a.state).then(function(e){S.saveSession(e),a.clearForm(),a.notifications.showMessage("logged in as: "+e.username);var t="/";S.checkUser()&&(t="/admin/projects-list"),setTimeout(function(){a.props.history.push(t)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.clearForm=function(){a.setState({username:"",password:""})},a.state={username:"",password:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"login",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:"bg"}),r.a.createElement("h1",null,"Login"),r.a.createElement("form",{method:"post",onSubmit:this.login},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,className:"form-control",id:"username",placeholder:"Username",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,className:"form-control",id:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("button",{className:"btn btn-primary",type:"submit"}," Login")))}}]),t}(r.a.Component),Q=function(e){function t(e){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){this.props.images;return r.a.createElement("div",{className:"carousel"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"img-fit",src:"/images/carousel/carousel_03.jpg",alt:""})))}}]),t}(r.a.Component),Z=function(e){function t(e){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.project,t=this.context.language;return r.a.createElement("article",{className:"project-card"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"img-fit",src:e.thumbnail,alt:e.name[t]})),r.a.createElement(h.a,{to:"/projects/all/"+e._id,className:"hover"},r.a.createElement("div",{className:"info"},r.a.createElement("p",{className:"project-client"},e.clientName[t]),r.a.createElement("p",{className:"project-name"},e.name[t]),r.a.createElement("p",{className:"project-year"},e.year),r.a.createElement("button",{className:"btn btn-light xs"},T[t].view))))}}]),t}(r.a.Component);Z.contextType=W;var ee=Z,te={createProject:function(e){var t=ae(e);return y("sessionAuth","appdata","projects",t)},loadAllProjects:function(e){return E("sessionAuth","appdata","projects",e)},loadProjectData:function(e){return E("sessionAuth","appdata","projects/"+e)},getProjectsCount:function(){return E("sessionAuth","appdata","projects/_count")},editProject:function(e,t){var a="projects/"+e,n=ae(t);return C("sessionAuth","appdata",a,n)},deleteProject:function(e){return N("sessionAuth","appdata","projects/"+e)}};function ae(e){return{name:e.name,description:e.description,year:e.year,webPage:e.webPage,isStar:e.isStar,clientId:e.clientId,categoryIds:e.categoryIds,images:e.images,thumbnail:e.thumbnail,videos:e.videos}}var ne={createClient:function(e){var t=re(e);return y("adminAuth","appdata","clients",t)},loadAllClients:function(){return E("adminAuth","appdata","clients")},loadClientData:function(e){return E("adminAuth","appdata","clients/"+e)},editClient:function(e,t){var a="clients/"+e,n=re(t);return C("adminAuth","appdata",a,n)}};function re(e){return{name:e.name}}var ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadStarProjects=function(){te.loadAllProjects('?query={"isStar":true}').then(function(e){a.setState({projects:e}),ne.loadAllClients().then(function(e){a.setState({clients:e}),a.state.projects.forEach(function(e){e.clientName=a.state.clients.filter(function(t){return t._id===e.clientId})[0].name}),w.loadAllCategories().then(function(e){a.setState({categories:e,loading:!1})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.state={projects:[],clients:[],categories:[],images:[],loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;sessionStorage.removeItem("filteredProjects"),null!==sessionStorage.getItem("authtoken")?this.loadStarProjects():S.loginAnonymousUser().then(function(t){S.saveSession(t),e.loadStarProjects()}).catch(function(t){return e.notifications.showMessage(t.responseJSON.description)})}},{key:"render",value:function(){if(this.state.loading)return r.a.createElement("div",{className:"lds-dual-ring"});this.context.language;var e=this.state.projects.map(function(e){return r.a.createElement(ee,{key:e._id,project:e})});return r.a.createElement("div",{id:"home",className:"container-fluid"},r.a.createElement("section",{className:"hero"},r.a.createElement(Q,{images:this.state.images}),r.a.createElement("div",{className:"brand"},r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:"images/logo/addict_logo_10.svg",className:"svg-icon img-fit"})),r.a.createElement("p",{className:"text"},"\u041d\u0438\u0435 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043c\u0435 \u043d\u0435\u0449\u0430. \u0418\u0437\u043c\u0438\u0441\u043b\u044f\u043c\u0435 \u0441\u0438. \u041c\u0435\u0447\u0442\u0430\u0435\u043c.",r.a.createElement("br",null),"\u041f\u0440\u043e\u0441\u0442\u043e \u043e\u0431\u0438\u0447\u0430\u043c\u0435 \u0442\u043e\u0432\u0430, \u043a\u043e\u0435\u0442\u043e \u043f\u0440\u0430\u0432\u0438\u043c."))),r.a.createElement("section",{className:"projects-container"},e))}}]),t}(r.a.Component);ie.contextType=W;var ce=ie,se=function(e){function t(e){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.project,a=e.category,n=this.context.language,i="en"===n?"/"+n:"",c=a?i+"/projects/"+a+"/"+t._id:i+"/projects/all/"+t._id;return r.a.createElement("article",{className:"project-card"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"img-fit",src:t.thumbnail,alt:t.name[n]})),r.a.createElement(h.a,{to:c,className:"hover"},r.a.createElement("div",{className:"info"},t.clientName&&r.a.createElement("p",{className:"project-client"},t.clientName[n]),r.a.createElement("p",{className:"project-name"},t.name[n]),r.a.createElement("p",{className:"project-year"},t.year))))}}]),t}(r.a.Component);se.contextType=W;var oe=se,le=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadAllData=function(){ne.loadAllClients().then(function(e){a.setState({clients:e}),w.loadAllCategories().then(function(e){a.setState({categories:e},function(){return a.getCategoryId()})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.loadProjects=function(){var e;if(""!==a.state.selectedCategoryId){var t=a.state.selectedCategoryId;e='?query={"categoryIds":"'.concat(t,'"}')}te.loadAllProjects(e).then(function(e){e.forEach(function(e){e.clientName=a.state.clients.filter(function(t){return t._id===e.clientId})[0].name}),a.setState({projects:e,loading:!1},function(){return a.saveProjectsInSession()})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.getCategoryId=function(){a.setState({loading:!0});var e=a.props.match.params.category;if(void 0!==e){var t=a.state.categories.filter(function(t){return t.name.en===e})[0]._id;a.setState({selectedCategoryId:t},function(){return a.loadProjects()})}else a.setState({selectedCategoryId:""},function(){return a.loadProjects()})},a.saveProjectsInSession=function(){var e=[];a.state.projects.forEach(function(t){return e.push(t._id)}),sessionStorage.setItem("filteredProjects",JSON.stringify(e))},a.state={projects:[],clients:[],categories:[],selectedCategoryId:"",loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==sessionStorage.getItem("authtoken")?this.loadAllData():S.loginAnonymousUser().then(function(t){S.saveSession(t),e.loadAllData()}).catch(function(t){return e.notifications.showMessage(t.responseJSON.description)})}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.category!==e.match.params.category&&(this.props=e,this.getCategoryId())}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("div",{className:"lds-dual-ring"});var t=this.context.language,a=this.props.match.params.category,n=this.state.projects.map(function(e,t){return r.a.createElement(oe,{key:e._id+t,project:e,category:a})});return r.a.createElement("div",{id:"projects-list",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:t}),r.a.createElement("div",{className:"projects-container"},n))}}]),t}(r.a.Component);le.contextType=W;var me=le,ue=a(17),de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showNextImage=function(){var e=a.state.allImages,t=a.image.current,n=e.indexOf(a.state.image)+1;n===e.length&&(n=0),a.fadeOut(t),setTimeout(function(){a.setState({image:a.state.allImages[n]}),a.fadeIn(t)},600)},a.showPrevImage=function(){var e=a.state.allImages,t=a.image.current,n=e.indexOf(a.state.image)-1;n<0&&(n=e.length-1),a.fadeOut(t),setTimeout(function(){a.setState({image:a.state.allImages[n]}),a.fadeIn(t)},600)},a.fadeOut=function(e){window.requestAnimationFrame(function(){e.style.transition="opacity 400ms",e.style.opacity=0})},a.fadeIn=function(e){window.requestAnimationFrame(function(){e.style.transition="opacity 1200ms",e.style.opacity=1})},a.state={image:"",allImages:[]},a.image=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({image:this.props.image,allImages:this.props.allImages})}},{key:"componentWillReceiveProps",value:function(e){this.setState({image:e.image})}},{key:"render",value:function(){var e=""!==this.state.image;return r.a.createElement("div",{className:e?"image-preview visible":"image-preview"},r.a.createElement("button",{className:"close-btn",onClick:this.props.onClose},"close"),r.a.createElement("div",{className:"gallery-navigation"},r.a.createElement("span",{className:"gallery-navigation-button",onClick:this.showPrevImage},"prev"),r.a.createElement("span",{className:"gallery-navigation-button",onClick:this.showNextImage},"next")),r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:this.state.image,className:"img-fit",alt:this.state.image,ref:this.image})))}}]),t}(r.a.Component),ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).projectId=a.props.match.params.id,a.setIndexes=function(){var e=JSON.parse(sessionStorage.getItem("filteredProjects"));if(e){var t=e.indexOf(a.projectId),n=e[t+1],r=e[t-1];a.setState({currentProjectIndex:t,prevProjectId:r,nextProjectId:n},function(){return a.loadProject()})}else a.loadProject()},a.loadProject=function(){te.loadProjectData(a.projectId).then(function(e){a.setState({project:e})}).then(function(){ne.loadAllClients().then(function(e){var t=e.filter(function(e){return e._id===a.state.project.clientId});a.setState({clientName:t[0],loading:!1})})}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.loadRandomProjects=function(){te.loadAllProjects("?query={}&fields=_id").then(function(e){for(var t=e.filter(function(e){return e._id!==a.projectId}),n=[];n.length<3;){var r=Math.floor(Math.random()*t.length);n.includes(t[r]._id)||n.push(t[r]._id)}for(var i=0;i<n.length;i++)te.loadProjectData(n[i]).then(function(e){a.setState({randomProjects:Object(ue.a)(a.state.randomProjects).concat([e])})}).catch(function(e){return a.notifications.showMessage(e.responseJSON.description)})}).catch(function(e){return a.notifications.showMessage(e.responseJSON.description)})},a.showPreview=function(e){a.setState({selectedImage:e.target.src})},a.hidePreview=function(){a.setState({selectedImage:""})},a.state={project:[],clientName:"",selectedImage:"",currentProjectIndex:0,prevProjectId:void 0,nextProjectId:void 0,randomProjects:[],loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;null===sessionStorage.getItem("authtoken")?S.loginAnonymousUser().then(function(t){S.saveSession(t),e.setIndexes(),e.loadRandomProjects()}).catch(function(t){return e.notifications.showMessage(t.responseJSON.description)}):(this.setIndexes(),this.loadRandomProjects())}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.match.params.id!==e.match.params.id&&(this.setState({loading:!0}),this.props=e,this.projectId=e.match.params.id,this.setIndexes(),this.setState({randomProjects:[]},function(){return t.loadRandomProjects()}))}},{key:"componentWillUnmount",value:function(){sessionStorage.removeItem("filteredProjects")}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("div",{className:"lds-dual-ring"});var t=this.context.language,a=this.state.project,n=this.state.clientName[t],i=a.images.map(function(t){return r.a.createElement("figure",{className:"image",key:t},r.a.createElement("img",{src:t,className:"img-fit",alt:t,onClick:e.showPreview}))}),c=this.state.randomProjects.map(function(e,a){return r.a.createElement(oe,{key:e._id+a,project:e,activeLanguage:t})});return r.a.createElement("div",{id:"project",className:"container-fluid"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:t}),r.a.createElement(de,{image:this.state.selectedImage,allImages:a.images,onClose:this.hidePreview}),r.a.createElement("div",{className:"project-info"},r.a.createElement("p",{className:"project-title"},a.name[t]),r.a.createElement("p",null,n),r.a.createElement("p",null,a.description[t]),r.a.createElement("p",null,a.year),r.a.createElement("div",{className:"buttons-container"},r.a.createElement(h.a,{to:void 0!==this.state.prevProjectId?this.state.prevProjectId:"/projects",className:void 0!==this.state.prevProjectId?"btn btn-light":"btn btn-light disabled"},r.a.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"})),r.a.createElement(h.a,{to:void 0!==this.state.nextProjectId?this.state.nextProjectId:"/projects",className:void 0!==this.state.nextProjectId?"btn btn-light":"btn btn-light disabled"},r.a.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})))),r.a.createElement("div",{className:"project-gallery"},i),r.a.createElement("h2",{className:"section-title"},F.project[t].otherProjects),r.a.createElement("div",{className:"projects-container"},c))}}]),t}(r.a.Component);ge.contextType=W;var he=ge,pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value}),a.props.onChange(e)},a.state={value:a.props.value||""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.name,n=(e.value,e.id),i=e.placeholder,c=e.label,s=e.className,o=e.required,l=e.disabled,m=e.step,u=e.min,d=e.max;e.onChange;return r.a.createElement("div",{className:"form-group "+s},r.a.createElement("label",{htmlFor:n},c),r.a.createElement("input",{className:"form-control",type:t,value:this.state.value,name:a,id:n,placeholder:i,required:o,disabled:l,step:m,min:u,max:d,onChange:this.handleChange}))}}]),t}(r.a.Component),fe=function(e){function t(e){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.name,n=e.className,i=e.required,c=e.disabled,s=e.onChange,o=e.options,l=e.selected,m=o.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name.bg)});return r.a.createElement("div",{className:"form-group "+n},r.a.createElement("label",null,t,i&&r.a.createElement("label",{className:"text-danger"},"\xa0*")),r.a.createElement("select",{className:"form-control",name:a,disabled:c,required:i,onChange:s,defaultValue:l},r.a.createElement("option",{value:""}),m))}}]),t}(r.a.Component),be=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.id,n=e.value,i=e.placeholder,c=e.label,s=e.className,o=e.required,l=e.onChange;return r.a.createElement("div",{className:"form-group "+s},r.a.createElement("label",{htmlFor:a},c),r.a.createElement("textarea",{className:"form-control",name:t,id:a,value:n,placeholder:i,required:o,onChange:l}))}}]),t}(r.a.Component),ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value})},a.submit=function(e){e.preventDefault(),""!==a.state.value&&(a.props.onChange(e),a.setState({value:""}))},a.state={value:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.label,n=e.buttonText,i=e.name,c=e.labelClassName;return r.a.createElement("div",{className:"form-group add-on"},r.a.createElement("label",{className:c},a),r.a.createElement("input",{className:"form-control add-on",type:"text",placeholder:t,onChange:this.handleChange,value:this.state.value}),r.a.createElement("button",{className:"btn md btn-primary add-on-btn",name:i,value:this.state.value,onClick:this.submit},n))}}]),t}(r.a.Component),je=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onDragOver=function(e){e.preventDefault()},a.onDragStart=function(e,t){a.setState({startX:e.clientX,startY:e.clientY});var n=a.props.elements.indexOf(t);a.fadeOut(a.dataContainer.current.children[n],.1),e.dataTransfer.setData("element",t),e.dataTransfer.setData("index",a.props.elements.indexOf(t))},a.onDrop=function(e){var t,n,r=a.dataContainer,i=r.current.children[0].clientWidth,c=r.current.children[0].clientHeight,s=Math.floor(r.current.clientWidth/i),o=e.dataTransfer.getData("element"),l=Number(e.dataTransfer.getData("index")),m=a.state.startX,u=a.state.startY;t=Math.round((e.clientX-m)/i),n=Math.round((e.clientY-u)/c)*s;var d=l+n+t;if(d>=r.current.children.length||d===l)a.fadeIn(r.current.children[l],1);else{a.fadeOut(r.current.children[d],.3);var g=a.props.elements.filter(function(e){return e!==o});g.splice(d,0,o),a.props.onChange(a.props.name,g),setTimeout(function(){a.fadeIn(r.current.children[d],1),a.fadeIn(r.current.children[l],1)},200)}},a.fadeOut=function(e,t){window.requestAnimationFrame(function(){e.style.transition="opacity 0ms",e.style.opacity=t})},a.fadeIn=function(e,t){window.requestAnimationFrame(function(){e.style.transition="opacity 1200ms",e.style.opacity=t})},a.state={startX:0,startY:0},a.dataContainer=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.elements.map(function(t,a){return r.a.createElement("figure",{key:a,className:"image",draggable:!0,onDragStart:function(a){return e.onDragStart(a,t)}},r.a.createElement("img",{src:t,className:"img-fit",alt:""}),r.a.createElement("button",{className:"btn xs btn-primary del-btn",name:"images",value:t,onClick:e.props.onDelete},"clear"))});return r.a.createElement("div",{className:"droppable container",ref:this.dataContainer,onDragOver:this.onDragOver,onDrop:function(t){return e.onDrop(t)}},t)}}]),t}(r.a.Component),Ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showMessage=function(e,t){a.setState({visible:!0,message:e,function:t})},a.confirm=function(){a.state.function()},a.hideMessage=function(){a.setState({visible:!1,message:""})},a.state={visible:!1,message:"",function:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"render",value:function(){var e=this.state.visible,t=this.props.language;return r.a.createElement("div",{id:"confirm-dialog",className:e?"visible":"",onClick:this.hideMessage},r.a.createElement("div",{className:"message"},r.a.createElement("p",{className:"message-text"},this.state.message),r.a.createElement("button",{className:"btn btn-primary",onClick:this.hideMessage},T[t].cancel),r.a.createElement("button",{className:"btn btn-danger",onClick:this.confirm},T[t].confirm)))}}]),t}(r.a.Component),ye={0:"\u044f\u043d\u0443\u0430\u0440\u0438",1:"\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438",2:"\u043c\u0430\u0440\u0442",3:"\u0430\u043f\u0440\u0438\u043b",4:"\u043c\u0430\u0439",5:"\u044e\u043d\u0438",6:"\u044e\u043b\u0438",7:"\u0430\u0432\u0433\u0443\u0441\u0442",8:"\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438",9:"\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438",10:"\u043d\u043e\u0435\u043c\u0432\u0440\u0438",11:"\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438"};var Ce={calculatePriceAfterDiscount:function(e,t){return e=Number(e),(t=Number(t))>0?e-t/100*e:e},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return"".concat(("0"+r).slice(-2),".").concat(("0"+n).slice(-2),".").concat(a)},formatDateAndTime:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),c=t.getMinutes();return"".concat(("0"+r).slice(-2),".").concat(("0"+n).slice(-2),".").concat(a," ").concat(("0"+i).slice(-2),":").concat(("0"+c).slice(-2))},formatDateYearFirst:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return"".concat(a,"-").concat(("0"+n).slice(-2),"-").concat(("0"+r).slice(-2))},getDay:function(e){return new Date(e).getDate()},getMonth:function(e){var t=new Date(e);return ye[t.getMonth()]},getYear:function(e){return new Date(e).getFullYear()},getVideoDescription:function(e){var t,a,n=(t=" ",a=2,e.split(t,a).join(t).length+1);return e.substr(n)},createStateCopy:function(e){return JSON.parse(JSON.stringify(e))},getLanguage:function(e){e.props.match.params.lng===P.en?e.setState({activeLanguage:P.en}):e.setState({activeLanguage:P.bg})}},Ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).projectId=a.props.match.params.id,a.loadInputsData=function(){ne.loadAllClients().then(function(e){a.setState({allClients:e}),w.loadAllCategories().then(function(e){a.setState({allCategories:e,dataLoaded:!0})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})},a.handleInputChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.handleCheckBoxChange=function(e){e.preventDefault(),a.setState(Object(z.a)({},e.target.name,!a.state[e.target.name]))},a.handleMultiLangChange=function(e){var t=e.target.id.split("-")[1],n=e.target.name,r=e.target.value,i=Object.assign({},a.state[n]);i[t]=r,a.setState(Object(z.a)({},n,i))},a.handleArrChange=function(e){e.preventDefault(),a.state[e.target.name].includes(e.target.value)?a.setState(Object(z.a)({},e.target.name,a.state[e.target.name].filter(function(t){return t!==e.target.value}))):a.setState(Object(z.a)({},e.target.name,Object(ue.a)(a.state[e.target.name]).concat([e.target.value])))},a.handleNewOrder=function(e,t){a.setState(Object(z.a)({},e,t))},a.saveProject=function(e){e.preventDefault(),a.projectId?te.editProject(a.projectId,Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.successEdit),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)}):te.createProject(Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.projectCreated),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.confirmDelete=function(){a.confirmDialog.showMessage(R.bg.confirmDeleteProject,a.deleteProject)},a.deleteProject=function(){te.deleteProject(a.projectId).then(function(e){a.notifications.showMessage(J.bg.projectDeleted),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.cancel=function(e){e.preventDefault(),a.props.history.go(-1)},a.state={name:{},description:{},year:"",webPage:"",isStar:!1,clientId:"",categoryIds:[],images:[],thumbnail:"",videos:[],projectLoaded:!1,dataLoaded:!1,allClients:[],allCategories:[]},a.imagesContainer=r.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadInputsData(),this.projectId?te.loadProjectData(this.projectId).then(function(t){var a=t.clientId;ne.loadClientData(a),e.setState({name:t.name,description:t.description,year:t.year,webPage:t.webPage,isStar:t.isStar,clientId:t.clientId,categoryIds:t.categoryIds,images:t.images,thumbnail:t.thumbnail,videos:t.videos,projectLoaded:!0})}).catch(function(e){return console.log(e)}):this.setState({projectLoaded:!0})}},{key:"render",value:function(){var e=this,t=this.projectId?q.project.bg.editProject:q.project.bg.createProject,a=this.projectId?T.bg.edit:T.bg.create;if(!this.state.projectLoaded||!this.state.dataLoaded)return r.a.createElement("div",{className:"lds-dual-ring"});var n=""!==this.state.thumbnail?r.a.createElement("figure",{className:"image"},r.a.createElement("img",{src:this.state.thumbnail,alt:"project thumbnail",className:"img-fit"})):null,i=this.state.videos.map(function(t,a){return r.a.createElement("div",{className:"image",key:a},r.a.createElement("iframe",{src:t,title:t}),r.a.createElement("button",{className:"btn xs btn-primary del-btn",name:"videos",value:t,onClick:e.handleArrChange},"clear"))}),c=this.state.allCategories.map(function(t){var a=e.state.categoryIds.includes(t._id)?"btn category-label selected":"btn category-label";return r.a.createElement("button",{key:t._id,className:a,name:"categoryIds",value:t._id,onClick:e.handleArrChange},t.name.bg)}),s=r.a.createElement("button",{className:this.state.isStar?"btn category-label attention":"btn category-label",name:"isStar",value:this.state.isStar,onClick:this.handleCheckBoxChange},D.isStar);return r.a.createElement("div",{id:"project-create",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:"bg"}),r.a.createElement(Ee,{onRef:function(t){return e.confirmDialog=t},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},t),this.projectId&&r.a.createElement("button",{className:"btn btn-danger xs",onClick:this.confirmDelete},T.bg.delete)),r.a.createElement("form",{method:"post",onSubmit:this.saveProject,id:"create-project-form"},r.a.createElement("main",{id:"project-info"},r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.bg,id:"name-bg",placeholder:"",label:D.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.en,id:"name-en",placeholder:"",label:x.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement("div",{className:"form-group"},c),r.a.createElement(be,{name:"description",value:this.state.description.bg,id:"description-bg",placeholder:"",label:D.description,className:"description-field",required:!1,onChange:this.handleMultiLangChange}),r.a.createElement(be,{name:"description",value:this.state.description.en,id:"description-en",placeholder:"",label:x.description,className:"description-field",required:!1,onChange:this.handleMultiLangChange}),r.a.createElement(fe,{name:"clientId",label:D.client,className:"client-field",required:!1,disabled:!1,selected:this.state.clientId,options:this.state.allClients,onChange:this.handleInputChange}),r.a.createElement(pe,{type:"text",name:"year",value:this.state.year,id:"year",placeholder:"",label:D.year,className:"year-field",required:!1,disabled:!1,onChange:this.handleInputChange}),r.a.createElement(pe,{type:"text",name:"webPage",value:this.state.webPage,id:"web-page",placeholder:"",label:D.webPage,className:"",required:!1,disabled:!1,onChange:this.handleInputChange}),r.a.createElement("div",{className:"form-group"},s)),r.a.createElement("aside",{id:"project-data"},r.a.createElement("div",{className:"project-data"},r.a.createElement("h3",{className:"section-title"},q.project.bg.thumbnail),r.a.createElement("div",{className:"container"},n),r.a.createElement(ve,{name:"thumbnail",labelClassName:"no-label",buttonText:"+",placeholder:"Thumbnail",onChange:this.handleInputChange})),r.a.createElement("div",{className:"project-data"},r.a.createElement("h3",{className:"section-title"},q.project.bg.images),r.a.createElement(je,{elements:this.state.images,name:"images",onDelete:this.handleArrChange,onChange:this.handleNewOrder}),r.a.createElement(ve,{name:"images",labelClassName:"no-label",buttonText:"+",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438 \u0441\u043d\u0438\u043c\u043a\u0430",onChange:this.handleArrChange})),r.a.createElement("div",{className:"project-data"},r.a.createElement("h3",{className:"section-title"},q.project.bg.videos),r.a.createElement("div",{className:"container"},i),r.a.createElement(ve,{name:"videos",labelClassName:"no-label",buttonText:"+",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438 \u0432\u0438\u0434\u0435\u043e",onChange:this.handleArrChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-default",onClick:this.cancel},T.bg.cancel),r.a.createElement("button",{className:"btn btn-primary",type:"submit"},a))))}}]),t}(r.a.Component),Oe=function(e){function t(e){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.project;return r.a.createElement("article",{className:"project-card"},r.a.createElement("figure",{className:"img-container"},r.a.createElement("img",{className:"img-fit",src:e.thumbnail})),r.a.createElement("p",{className:"project-name"},e.name.bg),r.a.createElement(h.a,{to:"project-edit/"+e._id,className:"hover"},r.a.createElement("div",{className:"edit-btn"},r.a.createElement("i",{className:"fa fa-edit","aria-hidden":"true"}),T.bg.edit)))}}]),t}(r.a.Component),Se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={projects:[],loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===sessionStorage.length&&this.props.history.push("/"),te.loadAllProjects().then(function(t){e.setState({projects:t,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("div",{className:"lds-dual-ring"});var t=this.state.projects.map(function(e){return r.a.createElement(Oe,{key:e._id,project:e})});return r.a.createElement("div",{id:"admin-projects-list",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},q.project.bg.allProjects)),r.a.createElement("div",{className:"buttons-container"},r.a.createElement(h.a,{to:"/admin/project-create",className:"btn btn-primary sm"},T.bg.newProject),r.a.createElement(h.a,{to:"/admin/client-create",className:"btn btn-primary sm"},T.bg.newClient),r.a.createElement(h.a,{to:"/admin/category-create",className:"btn btn-primary sm"},T.bg.newCategory)),r.a.createElement("div",{className:"projects-container"},t))}}]),t}(r.a.Component),we=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).categoryId=a.props.match.params.id,a.handleMultiLangChange=function(e){var t=e.target.id.split("-")[1],n=e.target.name,r=e.target.value,i=Object.assign({},a.state[n]);i[t]=r,a.setState(Object(z.a)({},n,i))},a.clearData=function(){a.setState({name:{bg:"",en:""}})},a.saveCategory=function(e){e.preventDefault(),a.categoryId?w.editCategory(a.categoryId,Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.successEdit),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)}):w.createCategory(Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.categoryCreated),a.clearData(),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.confirm=function(){a.confirmDialog.showMessage("test",a.deleteCategory)},a.deleteCategory=function(){console.log("from delete")},a.cancel=function(e){e.preventDefault(),a.props.history.go(-1)},a.state={name:{},loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.categoryId?w.loadCategoryData(this.categoryId).then(function(t){e.setState({name:t.name,loading:!1})}).catch(function(e){return console.log(e)}):this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.categoryId?q.category.bg.editCategory:q.category.bg.newCategory,a=this.categoryId?T.bg.edit:T.bg.create;return this.state.loading?r.a.createElement("div",{className:"lds-dual-ring"}):r.a.createElement("div",{id:"project-create",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:"bg"}),r.a.createElement(Ee,{onRef:function(t){return e.confirmDialog=t},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},t),this.categoryId&&r.a.createElement("button",{className:"btn btn-danger xs",onClick:this.confirm},T.bg.delete)),r.a.createElement("form",{method:"post",onSubmit:this.saveCategory,id:"create-category-form"},r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.bg,id:"name-bg",placeholder:"",label:M.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.en,id:"name-en",placeholder:"",label:A.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-default",onClick:this.cancel},T.bg.cancel),r.a.createElement("button",{className:"btn btn-primary",type:"submit"},a))))}}]),t}(r.a.Component),Ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={categories:[],loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.loadAllCategories().then(function(t){e.setState({categories:t,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e,t=this;return this.state.categories.length>0&&(e=this.state.categories.map(function(e){return r.a.createElement(h.a,{key:e._id,to:"/admin/category-edit/"+e._id},r.a.createElement("span",{className:"category-label"},e.name.bg))})),this.state.projectLoading?r.a.createElement("div",{className:"lds-dual-ring"}):r.a.createElement("div",{id:"admin-categories-list",className:"container"},r.a.createElement(G,{onRef:function(e){return t.notifications=e},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438")),r.a.createElement("div",{className:"categories-container"},e))}}]),t}(r.a.Component),Pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).clientId=a.props.match.params.id,a.handleMultiLangChange=function(e){var t=e.target.id.split("-")[1],n=e.target.name,r=e.target.value,i=Object.assign({},a.state[n]);i[t]=r,a.setState(Object(z.a)({},n,i))},a.clearData=function(){a.setState({name:{bg:"",en:""}})},a.saveClient=function(e){e.preventDefault(),a.clientId?ne.editClient(a.clientId,Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.successEdit),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)}):ne.createClient(Ce.createStateCopy(a.state)).then(function(e){a.notifications.showMessage(J.bg.clientCreated),a.clearData(),setTimeout(function(){return a.props.history.go(-1)},2e3)}).catch(function(e){a.notifications.showMessage(e.responseJSON.description)})},a.confirm=function(){a.confirmDialog.showMessage("test",a.deleteClient)},a.deleteClient=function(){console.log("from delete")},a.cancel=function(e){e.preventDefault(),a.props.history.go(-1)},a.state={name:{},loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.clientId?ne.loadClientData(this.clientId).then(function(t){e.setState({name:t.name,loading:!1})}).catch(function(e){return console.log(e)}):this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.clientId?q.client.bg.editClient:q.client.bg.newClient,a=this.clientId?T.bg.edit:T.bg.create;return this.state.loading?r.a.createElement("div",{className:"lds-dual-ring"}):r.a.createElement("div",{id:"project-create",className:"container"},r.a.createElement(G,{onRef:function(t){return e.notifications=t},language:"bg"}),r.a.createElement(Ee,{onRef:function(t){return e.confirmDialog=t},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},t),this.clientId&&r.a.createElement("button",{className:"btn btn-danger xs",onClick:this.confirm},T.bg.delete)),r.a.createElement("form",{method:"post",onSubmit:this.saveClient,id:"create-category-form"},r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.bg,id:"name-bg",placeholder:"",label:L.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement(pe,{type:"text",name:"name",value:this.state.name.en,id:"name-en",placeholder:"",label:_.name,className:"name-field",required:!0,disabled:!1,onChange:this.handleMultiLangChange}),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-default",onClick:this.cancel},T.bg.cancel),r.a.createElement("button",{className:"btn btn-primary",type:"submit"},a))))}}]),t}(r.a.Component),ke=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={clients:[],loading:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;ne.loadAllClients().then(function(t){e.setState({clients:t,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e,t=this;return this.state.clients.length>0&&(e=this.state.clients.map(function(e){return r.a.createElement(h.a,{key:e._id,to:"/admin/client-edit/"+e._id},r.a.createElement("span",{className:"category-label"},e.name.bg))})),this.state.projectLoading?r.a.createElement("div",{className:"lds-dual-ring"}):r.a.createElement("div",{id:"admin-clients-list",className:"container"},r.a.createElement(G,{onRef:function(e){return t.notifications=e},language:"bg"}),r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},"\u041a\u043b\u0438\u0435\u043d\u0442\u0438")),r.a.createElement("div",{className:"clients-container"},e))}}]),t}(r.a.Component),De=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Error 404. Not found."),r.a.createElement("p",null,"This page doesn't exist."))}}]),t}(r.a.Component),xe=function(){return r.a.createElement(X.a,null,r.a.createElement(H.a,{exact:!0,path:"/:lng(en)?",component:ce}),r.a.createElement(H.a,{path:"/:lng(en)?/login",component:$}),r.a.createElement(H.a,{exact:!0,path:"/:lng(en)?/projects",component:me}),r.a.createElement(H.a,{exact:!0,path:"/:lng(en)?/projects/:category",component:me}),r.a.createElement(H.a,{exact:!0,path:"/:lng(en)?/projects/:category/:id",component:he}),r.a.createElement(H.a,{path:"/admin",render:function(e){var t=e.match.url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{exact:!0,path:"".concat(t,"/projects-list"),component:Se}),r.a.createElement(H.a,{path:"".concat(t,"/project-create"),component:Ne}),r.a.createElement(H.a,{path:"".concat(t,"/project-edit/:id"),component:Ne}),r.a.createElement(H.a,{exact:!0,path:"".concat(t,"/category-list"),component:Ie}),r.a.createElement(H.a,{path:"".concat(t,"/category-create"),component:we}),r.a.createElement(H.a,{path:"".concat(t,"/category-edit/:id"),component:we}),r.a.createElement(H.a,{exact:!0,path:"".concat(t,"/clients-list"),component:ke}),r.a.createElement(H.a,{path:"".concat(t,"/client-create"),component:Pe}),r.a.createElement(H.a,{path:"".concat(t,"/client-edit/:id"),component:Pe}))}}),r.a.createElement(H.a,{path:"*",component:De}))},Me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).updateLanguage=function(e){a.setState({language:e})},a.state={language:U.bg},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="/"===window.location.pathname;return r.a.createElement(W.Provider,{value:{language:this.state.language,updateLanguage:this.updateLanguage}},!e&&r.a.createElement(K,null),r.a.createElement("main",null,r.a.createElement(xe,null)),r.a.createElement(V,null))}}]),t}(r.a.Component);c.a.render(r.a.createElement(s.a,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.ec32ee84.chunk.js.map